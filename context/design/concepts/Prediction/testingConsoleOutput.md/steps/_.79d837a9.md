---
timestamp: 'Sun Oct 19 2025 17:46:00 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251019_174600.29477a3f.md]]'
content_id: 79d837a90a459eddd4c41ceeaaa7382a7a5fb88923d86b6d31f32e6f8f6d1624
---

# Console Output from Execution of PredictionConcept.test

running 1 test from ./src/concepts/Prediction/PredictionConcept.test.ts

PredictionConcept ...

\------- post-test output -------

\[Test Setup] Initialized mock database

\----- post-test output end -----

should fulfill its principle: update forecasts based on inputs and retrieve them ...

\------- post-test output -------

\[MockCollection] createIndex called with keys: { queueID: 1 } options: { unique: true }

\[Test Setup] PredictionConcept initialized for a new test.

\--- Principle Test: location:principle\_cafe ---

\[PredictionConcept] Attempting to run prediction for queue: location:principle\_cafe

\[AIPredictionEngine] Running prediction for queue: location:principle\_cafe with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Prediction for location:principle\_cafe: {

estWaitTime: 17,

entryProbability: 0.86,

confidenceInterval: \[ 12, 27 ]

}
\[PredictionConcept] Stored/updated prediction for queue: location:principle\_cafe

\[Principle Test] First runPrediction result: {

queueID: "location:principle\_cafe",

estWaitTime: 17,

entryProbability: 0.86,

confidenceInterval: \[ 12, 27 ]

}

\[PredictionConcept] Getting forecast for queue: location:principle\_cafe

\[Principle Test] First getForecast result: {

queueID: "location:principle\_cafe",

estWaitTime: 17,

entryProbability: 0.86,

confidenceInterval: \[ 12, 27 ],

lastRun: 2025-10-19T21:36:37.841Z

}

\[Principle Test] First run time: 2025-10-19T21:36:37.841Z

\[PredictionConcept] Attempting to run prediction for queue: location:principle\_cafe

\[AIPredictionEngine] Running prediction for queue: location:principle\_cafe with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Prediction for location:principle\_cafe: {

estWaitTime: 24,

entryProbability: 0.81,

confidenceInterval: \[ 19, 34 ]

}

\[PredictionConcept] Stored/updated prediction for queue: location:principle\_cafe

\[Principle Test] Second runPrediction result: {

queueID: "location:principle\_cafe",

estWaitTime: 24,

entryProbability: 0.81,

confidenceInterval: \[ 19, 34 ]

}

\[PredictionConcept] Getting forecast for queue: location:principle\_cafe

\[Principle Test] Second getForecast result: {

queueID: "location:principle\_cafe",

estWaitTime: 24,

entryProbability: 0.81,

confidenceInterval: \[ 19, 34 ],

lastRun: 2025-10-19T21:36:38.345Z

}

\[Principle Test] Second run time: 2025-10-19T21:36:38.345Z

\--- Principle Test Passed ---

\----- post-test output end -----

should fulfill its principle: update forecasts based on inputs and retrieve them ... ok (942ms)

should return error for runPrediction if AI engine reports insufficient data ...

\------- post-test output -------

\[MockCollection] createIndex called with keys: { queueID: 1 } options: { unique: true }

\[Test Setup] PredictionConcept initialized for a new test.

\--- Variant Test: Insufficient Data for queue:insufficient\_data ---

\[PredictionConcept] Attempting to run prediction for queue: queue:insufficient\_data

\[AIPredictionEngine] Running prediction for queue: queue:insufficient\_data with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Insufficient data for prediction for queue: queue:insufficient\_data

\[PredictionConcept] Insufficient information for prediction for queue: queue:insufficient\_data. No forecast stored.

\[Insufficient Data Test] runPrediction result: {

error: "Insufficient information to generate a prediction for queue 'queue:insufficient\_data'."

}

\--- Insufficient Data Test Passed ---

\----- post-test output end -----

should return error for runPrediction if AI engine reports insufficient data ... ok (479ms)

should return error for getForecast if no prediction exists for the queue ...

\------- post-test output -------

\[MockCollection] createIndex called with keys: { queueID: 1 } options: { unique: true }

\[Test Setup] PredictionConcept initialized for a new test.

\--- Variant Test: Get Forecast for Non-Existent Queue location:non\_existent\_queue ---

\[PredictionConcept] Getting forecast for queue: location:non\_existent\_queue

\[Non-Existent Queue Test] getForecast result: { error: "No forecast found for queue
'location:non\_existent\_queue'." }

\--- Non-Existent Queue Test Passed ---

\----- post-test output end -----

should return error for getForecast if no prediction exists for the queue ... ok (0ms)

should successfully clean old predictions but keep recent ones ...

\------- post-test output -------

\[MockCollection] createIndex called with keys: { queueID: 1 } options: { unique: true }

\[Test Setup] PredictionConcept initialized for a new test.

\--- Variant Test: Clean Old Reports ---

\[PredictionConcept] Attempting to run prediction for queue: location:old\_report\_queue

\[AIPredictionEngine] Running prediction for queue: location:old\_report\_queue with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Prediction for location:old\_report\_queue: {

estWaitTime: 28,

entryProbability: 0.86,

confidenceInterval: \[ 23, 38 ]

}
\[PredictionConcept] Stored/updated prediction for queue: location:old\_report\_queue

\[Clean Reports Test] Manually set oldPredictionDoc lastRun for location:old\_report\_queue to: 2025-10-16T21:36:39.295Z

\[PredictionConcept] Attempting to run prediction for queue: location:recent\_report\_queue

\[AIPredictionEngine] Running prediction for queue: location:recent\_report\_queue with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Prediction for location:recent\_report\_queue: {

estWaitTime: 21,

entryProbability: 0.84,

confidenceInterval: \[ 16, 31 ]

}
\[PredictionConcept] Stored/updated prediction for queue: location:recent\_report\_queue

\[Clean Reports Test] Created recentPredictionDoc for location:recent\_report\_queue with lastRun:

2025-10-19T21:36:39.775Z

\[Clean Reports Test] Running cleanOldReports action.

\[PredictionConcept] Initiating cleanup of old predictions.

\[PredictionConcept] Deleted 1 old predictions.

\[Clean Reports Test] cleanOldReports result: {}

\[Clean Reports Test] Verified old prediction for location:old\_report\_queue is deleted.

\[Clean Reports Test] Verified recent prediction for location:recent\_report\_queue is still present.

\--- Clean Old Reports Test Passed ---

\----- post-test output end -----

should successfully clean old predictions but keep recent ones ... ok (948ms)

should handle invalid modelID in runPrediction gracefully (default to concept's model) ...

\------- post-test output -------

\[MockCollection] createIndex called with keys: { queueID: 1 } options: { unique: true }

\[Test Setup] PredictionConcept initialized for a new test.

\--- Variant Test: Invalid Model ID in runPrediction for location:invalid\_model\_test ---

\[Invalid Model ID Test] Attempting runPrediction with invalid modelID: 'non\_existent\_model'

\[PredictionConcept] Mismatch: runPrediction called with modelID 'non\_existent\_model' but concept configured with 'default\_prediction\_model\_v1'. Proceeding with configured model.

\[PredictionConcept] Attempting to run prediction for queue: location:invalid\_model\_test

\[AIPredictionEngine] Running prediction for queue: location:invalid\_model\_test with model:

default\_prediction\_model\_v1

\[AIPredictionEngine] Prediction for location:invalid\_model\_test: {

estWaitTime: 17,

entryProbability: 0.86,

confidenceInterval: \[ 12, 27 ]

}

\[PredictionConcept] Stored/updated prediction for queue: location:invalid\_model\_test

\[Invalid Model ID Test] runPrediction result with invalid modelID: {

queueID: "location:invalid\_model\_test",

estWaitTime: 17,

entryProbability: 0.86,

confidenceInterval: \[ 12, 27 ]

}
\--- Invalid Model ID Test Passed ---

\----- post-test output end -----

should handle invalid modelID in runPrediction gracefully (default to concept's model) ... ok (480ms)

\------- post-test output -------

\[Test Teardown] Cleared mock database

\----- post-test output end -----

PredictionConcept ... ok (2s)
